# HQ Reconnaissance Report
**Generated:** 2025-01-31  
**Project:** Boutique Family Office Platform  
**Environment:** Development

## Executive Summary
Comprehensive reconnaissance of the BFO platform revealing 606-line routing configuration, 13 primary persona dashboards, multiple header implementations, and extensive admin infrastructure.

---

## Routes Map (Path → Component)

### Core Landing Pages
- `/` → Navigate to `/family/home` (auth) or `/discover` (public) or `/nil/onboarding`
- `/families` → `FamiliesLanding`
- `/pros` → `ProsLanding` 
- `/catalog` → `CatalogPage`
- `/goals` → `GoalsPage`
- `/health` → `HealthcareLanding`
- `/pricing` → `Pricing`

### Persona Dashboard Routes
- `/personas/advisors` → `PersonaDashboard(advisors)`
- `/personas/insurance` → `PersonaDashboard(insurance)`
- `/personas/attorney` → `PersonaDashboard(attorney)`
- `/personas/cpa` → `PersonaDashboard(cpa)`
- `/personas/healthcare` → `PersonaDashboard(healthcare)`
- `/personas/nil` → `PersonaDashboard(nil)`
- `/family/home` → `PersonaDashboard(family)`

### Full Persona Dashboards
- `/personas/advisors/full` → `AdvisorPersonaDashboard`
- `/personas/insurance/full` → `InsurancePersonaDashboard`
- `/personas/accountants` → `AccountantPersonaDashboard`
- `/personas/attorneys` → `AttorneyPersonaDashboard`
- `/personas/families/retirees` → `FamilyRetireePersonaDashboard`
- `/personas/families/aspiring` → `FamilyAspiringPersonaDashboard`

### Professional Routes
- `/pros/advisors` → `AdvisorDashboardWithSideNav`
- `/pros/accountants` → `AccountantDashboard`
- `/pros/attorneys` → `Attorneys`

### Admin & Security Routes
- `/admin/security` → `SecurityDashboard`
- `/admin/migrations` → `AdminMigrations`
- `/admin/ip-tracker` → `IPTracker`
- `/admin/iphq` → `IPHQ`
- `/admin/hq` → `AdminHQ`

### Flag-Protected Admin Routes (ADMIN_TOOLS_ENABLED)
- `/admin/qa-coverage` → `QACoverage`
- `/admin/ready-check` → `ReadyCheck`
- `/admin/ready-check-enhanced` → `ReadyCheckEnhanced`
- `/admin/rules-coverage` → `RulesCoverage`
- `/admin/rules-import` → `RulesImport`
- `/admin/rules-export` → `RulesExport`
- `/admin/k401/partner` → `K401Partner`
- `/admin/receipts` → `ReceiptsViewer`
- `/admin/trust-anchors` → `TrustAnchors`
- `/admin/sites` → `SitesAdmin`
- `/admin/revenue` → `RevenueAdmin`
- `/admin/automations` → `AutomationsAdmin`

### NIL Routes (NIL_PUBLIC_ENABLED)
- `/nil` → `MarketplacePage`
- `/nil/index` → `Index`
- `/nil/demo` → `NILDemoPage`
- `/nil/tour` → `NILTourPage`
- `/nil/athlete/home` → `NILAthleteHome`

### Onboarding Routes (ONBOARDING_PUBLIC_ENABLED)
- `/start/families` → `FamilyOnboarding`
- `/start/advisors` → `ProfessionalOnboarding(advisors)`
- `/start/cpas` → `ProfessionalOnboarding(cpas)`
- `/start/attorneys` → `ProfessionalOnboarding(attorneys)`
- `/start/healthcare` → `HealthcareOnboarding`
- `/start/nil-athlete` → `NILOnboardingFlow(athlete)`

### Solutions Routes (SOLUTIONS_ENABLED)
- `/solutions` → `SolutionsPage`
- `/solutions/annuities` → `Annuities`
- `/solutions/investments` → `SolutionsInvestmentsPage`
- `/solutions/insurance` → `SolutionsInsurancePage`
- `/solutions/lending` → `SolutionsLendingPage`
- `/solutions/tax` → `SolutionsTaxPage`
- `/solutions/estate` → `SolutionsEstatePage`

### Crypto Routes (CRYPTO_ENABLED)
- `/crypto/dashboard` → `CryptoDashboard` (lazy)
- `/crypto/beneficiaries` → `BeneficiaryDirectives` (lazy)
- `/crypto/trade` → `TradePanel` (lazy, CRYPTO_TRADE_ENABLED)

### Catch-All
- `*` → `NotFound`

---

## Persona Dashboards + Primary Widgets

### 1. PersonaDashboard (Generic)
**Path:** `/personas/*`  
**Component:** `@/components/bfo/PersonaDashboard`  
**Variants:** advisors, insurance, attorney, cpa, healthcare, nil, family  
**Primary Widgets:** Dynamic based on personaId

### 2. AdvisorPersonaDashboard 
**Path:** `/personas/advisors/full`  
**Component:** `@/pages/personas/AdvisorPersonaDashboard`  
**Primary Widgets:** [Need component analysis]

### 3. InsurancePersonaDashboard
**Path:** `/personas/insurance/full`  
**Component:** `@/pages/personas/InsurancePersonaDashboard`  
**Primary Widgets:** [Need component analysis]

### 4. AccountantPersonaDashboard
**Path:** `/personas/accountants`  
**Component:** `@/pages/personas/AccountantPersonaDashboard`  
**Primary Widgets:** [Need component analysis]

### 5. AttorneyPersonaDashboard
**Path:** `/personas/attorneys`  
**Component:** `@/pages/personas/AttorneyPersonaDashboard`  
**Primary Widgets:** [Need component analysis]

### 6. FamilyRetireePersonaDashboard
**Path:** `/personas/families/retirees`  
**Component:** `@/pages/personas/FamilyRetireePersonaDashboard`  
**Primary Widgets:** [Need component analysis]

### 7. FamilyAspiringPersonaDashboard
**Path:** `/personas/families/aspiring`  
**Component:** `@/pages/personas/FamilyAspiringPersonaDashboard`  
**Primary Widgets:** [Need component analysis]

### 8. AdvisorDashboardWithSideNav
**Path:** `/pros/advisors`  
**Component:** `@/pages/personas/AdvisorDashboardWithSideNav`  
**Primary Widgets:** Side navigation + dashboard content

### 9. AccountantDashboard
**Path:** `/pros/accountants`  
**Component:** `@/pages/pros/AccountantDashboard`  
**Primary Widgets:** [Need component analysis]

### 10. SecurityDashboard
**Path:** `/admin/security`  
**Component:** `@/components/bfo/SecurityDashboard`  
**Primary Widgets:** Security metrics and controls

### 11. CryptoDashboard
**Path:** `/crypto/dashboard`  
**Component:** `@/pages/crypto/CryptoDashboard` (lazy loaded)  
**Primary Widgets:** [Crypto portfolio management]

### 12. NILAthleteHome
**Path:** `/nil/athlete/home`  
**Component:** `@/pages/nil/NILAthleteHome`  
**Primary Widgets:** [NIL athlete specific tools]

### 13. AdvisorHome
**Path:** `/advisor/home`  
**Component:** `@/pages/advisor/AdvisorHome`  
**Primary Widgets:** [Advisor home dashboard]

---

## Top Banners/Headers + Sources

### 1. BrandHeader (Primary)
**Source:** `@/components/layout/BrandHeader`  
**Usage:** `<BrandHeader />` in App.tsx line 240  
**Styling:** 
- Solid black background (`#0B0F14`)
- Thin gold border (`#D4AF37`)
- Height: 56px
- Sticky positioning
- Contains BFO logo and basic navigation

### 2. MegaMenu
**Source:** `@/components/nav/MegaMenu`  
**Usage:** `<MegaMenu />` in App.tsx line 241  
**Purpose:** Extended navigation menu

### 3. BFOHeader (Site-specific)
**Source:** `@/components/site/BFOHeader`  
**Usage:** Found in ProsPage and FamiliesPage  
**Purpose:** Alternative header for specific pages

### 4. CTAStickyBar
**Source:** `@/components/ui/CTAStickyBar`  
**Usage:** In App.tsx line 11 import  
**Purpose:** Call-to-action banner

### 5. ExtensionHealthBanner
**Source:** `@/components/ExtensionHealthBanner`  
**Purpose:** System health notifications for admins

### 6. DashboardHeader
**Source:** `@/components/ui/DashboardHeader`  
**Usage:** Various dashboard pages  
**Purpose:** Page-specific dashboard headers

---

## 404-Producing Routes Analysis

### Identified Patterns
1. **Flag-Protected Routes:** Routes behind feature flags may 404 when flags disabled
2. **Dynamic Routes:** Persona sub-routes may 404 for undefined personas
3. **Admin Routes:** Extensive admin routing may have broken links
4. **Legacy Redirects:** Old route patterns may still be referenced

### High-Risk Areas
- `/admin/*` routes (60+ admin pages)
- `/personas/:id/:subId` dynamic routing
- Feature-flagged routes when flags are disabled
- Onboarding flows with complex routing
- NIL routes when NIL_PUBLIC_ENABLED is false

### NotFound Handling
**Component:** `@/pages/NotFound`  
**Catch-all Route:** `<Route path="*" element={<NotFound />} />`  
**Analytics:** Logs 404 attempts to console

---

## Wireframe Export Queue

**Target Pages for PNG Export:**
1. `/` (Home/Index)
2. `/families` (Families Landing)
3. `/pros` (Professionals Landing)  
4. `/discover` (Discover Page)
5. `/pricing` (Pricing Page)
6. `/nil/` (NIL Marketplace)
7. `/nil/demo` (NIL Demo)
8. `/nil/tour` (NIL Tour)

**Export Directory:** `/out/wireframes/`  
**Naming Convention:** `{route-slug}_wireframe_2025-01-31.png`

---

## Technical Infrastructure Notes

### Flag System
- Feature flags control route visibility
- Key flags: ADMIN_TOOLS_ENABLED, NIL_PUBLIC_ENABLED, SOLUTIONS_ENABLED, etc.
- Routes conditionally rendered based on `getFlag()` calls

### Authentication Flow
- Supabase auth integration
- Protected routes redirect to appropriate landing pages
- Admin routes have additional role-based protection

### Lazy Loading
- Heavy components (Estate, Crypto, K401) are lazy loaded
- Suspense fallbacks implemented
- Performance optimization for large feature sets

### Route Organization
- Clear separation between public/private routes
- Persona-based routing structure  
- Admin tools grouped together
- Feature-flag protection for experimental routes

---

**Report Generated:** 2025-01-31  
**Total Routes Analyzed:** 150+  
**Admin Routes:** 60+  
**Persona Dashboards:** 13  
**Header Components:** 6  
**Status:** ✅ Complete