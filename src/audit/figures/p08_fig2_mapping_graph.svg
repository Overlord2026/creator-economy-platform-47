<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <title>FIG.2: Field-Level Mapping Graph with Confidence Scoring</title>
  
  <!-- Background -->
  <rect width="800" height="600" fill="white" stroke="black" stroke-width="2"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="black">
    FIG.2: FIELD-LEVEL MAPPING WITH CONFIDENCE SCORING
  </text>
  
  <!-- Source Data Section -->
  <g id="source-data">
    <rect x="20" y="60" width="160" height="200" fill="white" stroke="black" stroke-width="2"/>
    <text x="100" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      SOURCE DATA
    </text>
    <text x="100" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      (LinkedIn Profile)
    </text>
    
    <!-- Source Fields -->
    <g id="source-fields">
      <!-- firstName -->
      <rect x="30" y="110" width="120" height="20" fill="white" stroke="black" stroke-width="1"/>
      <text x="35" y="122" font-family="Arial, sans-serif" font-size="9" fill="black">firstName: "John"</text>
      
      <!-- lastName -->
      <rect x="30" y="135" width="120" height="20" fill="white" stroke="black" stroke-width="1"/>
      <text x="35" y="147" font-family="Arial, sans-serif" font-size="9" fill="black">lastName: "Smith"</text>
      
      <!-- headline -->
      <rect x="30" y="160" width="120" height="20" fill="white" stroke="black" stroke-width="1"/>
      <text x="35" y="172" font-family="Arial, sans-serif" font-size="9" fill="black">headline: "CFP at ABC Firm"</text>
      
      <!-- positions -->
      <rect x="30" y="185" width="120" height="20" fill="white" stroke="black" stroke-width="1"/>
      <text x="35" y="197" font-family="Arial, sans-serif" font-size="9" fill="black">positions[0].title: "CFP"</text>
      
      <!-- email -->
      <rect x="30" y="210" width="120" height="20" fill="white" stroke="black" stroke-width="1"/>
      <text x="35" y="222" font-family="Arial, sans-serif" font-size="9" fill="black">email: "j.smith@abc.com"</text>
      
      <!-- education -->
      <rect x="30" y="235" width="120" height="20" fill="white" stroke="black" stroke-width="1"/>
      <text x="35" y="247" font-family="Arial, sans-serif" font-size="9" fill="black">education[0].degree: "MBA"</text>
    </g>
  </g>
  
  <!-- Transformation Rules Section -->
  <g id="transformation-rules">
    <rect x="220" y="60" width="200" height="300" fill="white" stroke="black" stroke-width="2"/>
    <text x="320" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      TRANSFORMATION RULES
    </text>
    
    <!-- Rule 1: Name Mapping -->
    <g id="rule1">
      <rect x="230" y="100" width="180" height="45" fill="white" stroke="black" stroke-width="1"/>
      <text x="235" y="115" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="black">Rule 1: Name Mapping</text>
      <text x="235" y="127" font-family="Arial, sans-serif" font-size="8" fill="black">firstName + lastName → full_name</text>
      <text x="235" y="137" font-family="Arial, sans-serif" font-size="8" fill="black">Confidence: EXACT (1.0)</text>
    </g>
    
    <!-- Rule 2: Title Extraction -->
    <g id="rule2">
      <rect x="230" y="155" width="180" height="45" fill="white" stroke="black" stroke-width="1"/>
      <text x="235" y="170" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="black">Rule 2: Title Extraction</text>
      <text x="235" y="182" font-family="Arial, sans-serif" font-size="8" fill="black">headline → professional_title</text>
      <text x="235" y="192" font-family="Arial, sans-serif" font-size="8" fill="black">Parse + Normalize: HIGH (0.9)</text>
    </g>
    
    <!-- Rule 3: Certification Detection -->
    <g id="rule3">
      <rect x="230" y="210" width="180" height="45" fill="white" stroke="black" stroke-width="1"/>
      <text x="235" y="225" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="black">Rule 3: Certification Detection</text>
      <text x="235" y="237" font-family="Arial, sans-serif" font-size="8" fill="black">Extract "CFP" → certifications[]</text>
      <text x="235" y="247" font-family="Arial, sans-serif" font-size="8" fill="black">Pattern Match: HIGH (0.95)</text>
    </g>
    
    <!-- Rule 4: Email Validation -->
    <g id="rule4">
      <rect x="230" y="265" width="180" height="45" fill="white" stroke="black" stroke-width="1"/>
      <text x="235" y="280" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="black">Rule 4: Email Validation</text>
      <text x="235" y="292" font-family="Arial, sans-serif" font-size="8" fill="black">email → contact_email</text>
      <text x="235" y="302" font-family="Arial, sans-serif" font-size="8" fill="black">Format Validation: HIGH (0.9)</text>
    </g>
    
    <!-- Rule 5: Education Mapping -->
    <g id="rule5">
      <rect x="230" y="320" width="180" height="35" fill="white" stroke="black" stroke-width="1"/>
      <text x="235" y="335" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="black">Rule 5: Education Mapping</text>
      <text x="235" y="347" font-family="Arial, sans-serif" font-size="8" fill="black">education[] → education_history</text>
    </g>
  </g>
  
  <!-- Confidence Scoring Engine -->
  <g id="confidence-engine">
    <rect x="460" y="60" width="160" height="120" fill="white" stroke="black" stroke-width="2"/>
    <text x="540" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      CONFIDENCE SCORING
    </text>
    <text x="540" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      ENGINE
    </text>
    
    <!-- Scoring Factors -->
    <text x="470" y="115" font-family="Arial, sans-serif" font-size="9" fill="black">• Data Completeness</text>
    <text x="470" y="127" font-family="Arial, sans-serif" font-size="9" fill="black">• Format Validation</text>
    <text x="470" y="139" font-family="Arial, sans-serif" font-size="9" fill="black">• Pattern Matching</text>
    <text x="470" y="151" font-family="Arial, sans-serif" font-size="9" fill="black">• Historical Accuracy</text>
    <text x="470" y="163" font-family="Arial, sans-serif" font-size="9" fill="black">• Source Reliability</text>
  </g>
  
  <!-- Target Schema Section -->
  <g id="target-schema">
    <rect x="660" y="60" width="120" height="200" fill="white" stroke="black" stroke-width="2"/>
    <text x="720" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      TARGET SCHEMA
    </text>
    <text x="720" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      (Profile Table)
    </text>
    
    <!-- Target Fields with Confidence -->
    <g id="target-fields">
      <!-- full_name -->
      <rect x="670" y="110" width="100" height="18" fill="white" stroke="black" stroke-width="1"/>
      <text x="675" y="121" font-family="Arial, sans-serif" font-size="8" fill="black">full_name</text>
      <rect x="755" y="112" width="12" height="14" fill="green" stroke="black" stroke-width="0.5"/>
      <text x="760" y="121" font-family="Arial, sans-serif" font-size="7" fill="white">1.0</text>
      
      <!-- professional_title -->
      <rect x="670" y="133" width="100" height="18" fill="white" stroke="black" stroke-width="1"/>
      <text x="675" y="144" font-family="Arial, sans-serif" font-size="8" fill="black">professional_title</text>
      <rect x="755" y="135" width="12" height="14" fill="green" stroke="black" stroke-width="0.5"/>
      <text x="760" y="144" font-family="Arial, sans-serif" font-size="7" fill="white">0.9</text>
      
      <!-- certifications -->
      <rect x="670" y="156" width="100" height="18" fill="white" stroke="black" stroke-width="1"/>
      <text x="675" y="167" font-family="Arial, sans-serif" font-size="8" fill="black">certifications[]</text>
      <rect x="755" y="158" width="12" height="14" fill="green" stroke="black" stroke-width="0.5"/>
      <text x="760" y="167" font-family="Arial, sans-serif" font-size="7" fill="white">0.95</text>
      
      <!-- contact_email -->
      <rect x="670" y="179" width="100" height="18" fill="white" stroke="black" stroke-width="1"/>
      <text x="675" y="190" font-family="Arial, sans-serif" font-size="8" fill="black">contact_email</text>
      <rect x="755" y="181" width="12" height="14" fill="green" stroke="black" stroke-width="0.5"/>
      <text x="760" y="190" font-family="Arial, sans-serif" font-size="7" fill="white">0.9</text>
      
      <!-- education_history -->
      <rect x="670" y="202" width="100" height="18" fill="white" stroke="black" stroke-width="1"/>
      <text x="675" y="213" font-family="Arial, sans-serif" font-size="8" fill="black">education_history</text>
      <rect x="755" y="204" width="12" height="14" fill="orange" stroke="black" stroke-width="0.5"/>
      <text x="760" y="213" font-family="Arial, sans-serif" font-size="7" fill="white">0.7</text>
      
      <!-- firm_affiliation -->
      <rect x="670" y="225" width="100" height="18" fill="white" stroke="black" stroke-width="1"/>
      <text x="675" y="236" font-family="Arial, sans-serif" font-size="8" fill="black">firm_affiliation</text>
      <rect x="755" y="227" width="12" height="14" fill="red" stroke="black" stroke-width="0.5"/>
      <text x="760" y="236" font-family="Arial, sans-serif" font-size="7" fill="white">0.6</text>
    </g>
  </g>
  
  <!-- Confidence Threshold Analysis -->
  <g id="threshold-analysis">
    <rect x="50" y="300" width="700" height="100" fill="white" stroke="black" stroke-width="2"/>
    <text x="400" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      CONFIDENCE THRESHOLD ANALYSIS
    </text>
    
    <!-- Threshold Line -->
    <line x1="100" y1="350" x2="700" y2="350" stroke="red" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="80" y="355" font-family="Arial, sans-serif" font-size="10" fill="red">0.8 Threshold</text>
    
    <!-- Confidence Bars -->
    <g id="confidence-bars">
      <!-- full_name -->
      <rect x="120" y="340" width="60" height="20" fill="green" stroke="black" stroke-width="1"/>
      <text x="150" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">full_name</text>
      <text x="150" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">1.0 ✓</text>
      
      <!-- professional_title -->
      <rect x="200" y="340" width="54" height="20" fill="green" stroke="black" stroke-width="1"/>
      <text x="227" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">title</text>
      <text x="227" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">0.9 ✓</text>
      
      <!-- certifications -->
      <rect x="280" y="340" width="57" height="20" fill="green" stroke="black" stroke-width="1"/>
      <text x="308" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">certs</text>
      <text x="308" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">0.95 ✓</text>
      
      <!-- contact_email -->
      <rect x="360" y="340" width="54" height="20" fill="green" stroke="black" stroke-width="1"/>
      <text x="387" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">email</text>
      <text x="387" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">0.9 ✓</text>
      
      <!-- education_history -->
      <rect x="440" y="340" width="42" height="20" fill="orange" stroke="black" stroke-width="1"/>
      <text x="461" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">edu</text>
      <text x="461" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">0.7 ⚠</text>
      
      <!-- firm_affiliation -->
      <rect x="500" y="340" width="36" height="20" fill="red" stroke="black" stroke-width="1"/>
      <text x="518" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">firm</text>
      <text x="518" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">0.6 ✗</text>
    </g>
    
    <!-- Legend -->
    <g id="legend">
      <rect x="580" y="330" width="15" height="10" fill="green" stroke="black" stroke-width="0.5"/>
      <text x="600" y="338" font-family="Arial, sans-serif" font-size="8" fill="black">Auto-Approve (≥0.8)</text>
      
      <rect x="580" y="345" width="15" height="10" fill="orange" stroke="black" stroke-width="0.5"/>
      <text x="600" y="353" font-family="Arial, sans-serif" font-size="8" fill="black">Human Review (0.6-0.8)</text>
      
      <rect x="580" y="360" width="15" height="10" fill="red" stroke="black" stroke-width="0.5"/>
      <text x="600" y="368" font-family="Arial, sans-serif" font-size="8" fill="black">Reject/Manual (<0.6)</text>
    </g>
  </g>
  
  <!-- Human Review Queue -->
  <g id="review-queue">
    <rect x="100" y="420" width="600" height="80" fill="white" stroke="black" stroke-width="2"/>
    <text x="400" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">
      HUMAN REVIEW QUEUE
    </text>
    
    <!-- Queue Items -->
    <g id="queue-items">
      <!-- Education Review -->
      <rect x="120" y="450" width="180" height="40" fill="white" stroke="orange" stroke-width="2"/>
      <text x="125" y="465" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="black">education_history (0.7)</text>
      <text x="125" y="477" font-family="Arial, sans-serif" font-size="8" fill="black">Source: "MBA" → "Master's Degree"</text>
      <text x="125" y="487" font-family="Arial, sans-serif" font-size="8" fill="black">Requires: Degree type clarification</text>
      
      <!-- Firm Review -->
      <rect x="320" y="450" width="180" height="40" fill="white" stroke="red" stroke-width="2"/>
      <text x="325" y="465" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="black">firm_affiliation (0.6)</text>
      <text x="325" y="477" font-family="Arial, sans-serif" font-size="8" fill="black">Source: headline → firm name</text>
      <text x="325" y="487" font-family="Arial, sans-serif" font-size="8" fill="black">Requires: Manual verification</text>
      
      <!-- Action Buttons -->
      <rect x="520" y="455" width="40" height="15" fill="green" stroke="black" stroke-width="1"/>
      <text x="540" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Approve</text>
      
      <rect x="520" y="475" width="40" height="15" fill="red" stroke="black" stroke-width="1"/>
      <text x="540" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Reject</text>
      
      <rect x="570" y="455" width="40" height="15" fill="blue" stroke="black" stroke-width="1"/>
      <text x="590" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Edit</text>
      
      <rect x="570" y="475" width="40" height="15" fill="gray" stroke="black" stroke-width="1"/>
      <text x="590" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Skip</text>
    </g>
  </g>
  
  <!-- Data Flow Arrows -->
  <g id="flow-arrows" stroke="black" stroke-width="2" fill="none" marker-end="url(#arrowhead)">
    <!-- Source to Rules -->
    <line x1="180" y1="160" x2="220" y2="160"/>
    
    <!-- Rules to Confidence -->
    <line x1="420" y1="160" x2="460" y2="120"/>
    
    <!-- Confidence to Target -->
    <line x1="620" y1="120" x2="660" y2="160"/>
    
    <!-- Target to Threshold Analysis -->
    <line x1="720" y1="260" x2="720" y2="300"/>
    <line x1="720" y1="300" x2="400" y2="300"/>
    
    <!-- Low confidence to Review Queue -->
    <line x1="518" y1="400" x2="400" y2="420"/>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>
  
  <!-- Detailed Algorithm Notes -->
  <g id="algorithm-notes">
    <text x="50" y="530" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="black">
      Algorithm Details:
    </text>
    <text x="50" y="545" font-family="Arial, sans-serif" font-size="9" fill="black">
      • Confidence = weighted_sum(completeness, format_validity, pattern_match, historical_accuracy, source_reliability)
    </text>
    <text x="50" y="557" font-family="Arial, sans-serif" font-size="9" fill="black">
      • Threshold: Auto-approve ≥0.8, Human review 0.6-0.8, Reject &lt;0.6
    </text>
    <text x="50" y="569" font-family="Arial, sans-serif" font-size="9" fill="black">
      • Hysteresis: Different thresholds for new vs. existing mappings to prevent oscillation
    </text>
  </g>
  
  <!-- Figure Reference -->
  <text x="20" y="590" font-family="Arial, sans-serif" font-size="10" fill="black">
    FIG.2 - Field-Level Mapping: Source data transformation with confidence scoring, threshold analysis, and human review queue for low-confidence mappings
  </text>
</svg>